# Con Fusion Server

This is the backend server for a restaurant named _Con Fusion_,
a practice project to learn javascript backend development.

It is written using
[Node.js](https://nodejs.org) as runtime,
[Express.js](https://expressjs.com) as application framework.
The project structure is generated by
[Express Generator](https://expressjs.com/en/starter/generator.html)
It uses [MongoDB](https://mongodb.com) as the persistent data store,
and [Mongoose](https://mongoosejs.com) ODM (object-document mapper).

## Requirements

- [Node.js](https://nodejs.org) (and [npm](https://npmjs.com))
- [MongoDB](https://mongodb.com)

## How to see it in action

First of all, start a MongoDB server at port 54321. For example:

    mongod --dbpath=/tmp/data --port=54321

Then just clone and run:

1. Clone the repo, and `cd` into it

        git clone https://github.com/munikarmanish/coursera-nodejs-confusion
        cd coursera-nodejs-confusion

2. Initall npm dependencies

        npm install

3. Start the server

        DEBUG=coursera-nodejs-confusion:* npm start   # debug mode (produces helpful console output)
        npm start                                     # production mode

4. Send requests to [http://localhost:3000](http://localhost:3000)

### Authentication

Right now, it uses simple username/password authentication using sessions. Use the following API for authentication:

Operation | Method | URL | Body
--- | --- | --- | ---
Signup | POST | /users/signup | `{ "username": "abc", "password": "xyz" }`
Login | POST | /users/login | `{ "username": "abc", "password": "xyz" }`
Logout | GET | /users/logout |

## API Endpoints

Endpoint | Supported methods
--- | ---
`/dishes` | GET, POST, DELETE
`/dishes/<dishId>` | GET, PUT, DELETE
`/dishes/<dishId>/comments` | GET, POST, DELETE
`/dishes/<dishId>/comments/<commentId>` | GET, PUT, DELETE
`/promotions` | GET, POST, DELETE
`/promotions/<promoId>` | GET, PUT, DELETE
`/leader` | GET, POST, DELETE
`/leader/<leaderId>` | GET, PUT, DELETE

### Method documentation

Method | Description
--- | ---
GET | Retrieve record(s)
POST | Insert new record in the collection
PUT | Modify a record
DELETE | Delete record(s)

## Reference

- [Server-side Development with NodeJS, Express and MongoDB, Coursera](https://www.coursera.org/learn/server-side-nodejs)
